import{t as S,a as g,b as et,n as L}from"./FYrJzXzo.js";import"./CM28Q3F9.js";import{p as B,l as p,s as d,d as m,h as f,g as t,j as q,c as _,r as k,t as U,e as A,a as P,f as ct,b as H,m as lt,aB as nt,n as st}from"./BWQv4ORO.js";import{e as z}from"./DGJXvoP4.js";import{p as b,s as dt,b as ut,i as vt}from"./Agn4hVUl.js";import{i as T}from"./aOCAfh_U.js";import{c as mt,a as ht}from"./Dnl6xlxb.js";import{c as gt,d as ft}from"./eV_I911L.js";import{s as D}from"./VQVawItz.js";import{c as E,a as F,s as R,i as rt,n as pt,r as wt,g as bt}from"./KVacng_F.js";import{o as it,v as xt,w as J,p as ot,u as G,x as _t,y as kt,z as yt}from"./BfjeiFU6.js";import{P as Ht}from"./BGOVFCWW.js";import{S as Vt}from"./B9SVi3zS.js";import{s as Ct}from"./Dss2Gfxm.js";import{b as zt}from"./BQZnyJ-a.js";import{u as St}from"./C4a1ezua.js";var Mt=S("<button><!></button>");function at(v,r){B(r,!1);const e=m(),o=m(),a=m(),i=m(),l=m();let s=b(r,"editorView",8),c=b(r,"editorState",8),n=b(r,"type",8);function x(){t(a)(c(),s().dispatch,s()),s().focus()}p(()=>f(c()),()=>{d(e,c().schema)}),p(()=>(t(e),f(n())),()=>{d(o,t(e).marks[n()])}),p(()=>t(o),()=>{d(a,it(t(o)))}),p(()=>(t(o),t(a),f(c())),()=>{d(i,!t(o)||!t(a)(c(),null))}),p(()=>(t(o),f(c())),()=>{d(l,xt(t(o))(c()))}),q(),T();var y=Mt(),I=_(y);D(I,r,"default",{}),k(y),U(M=>{y.disabled=t(i),R(y,1,M)},[()=>E(F(t(l)?"bg-gray-900 text-white":"hover:bg-gray-100","sm:mx-1 rounded-full p-2 disabled:opacity-30"))],A),z("click",y,x),g(v,y),P()}var $t=S("<button><!></button>");function Lt(v,r){B(r,!1);const e=m(),o=m();let a=b(r,"editorView",8),i=b(r,"editorState",8);function l(){J(t(e).nodes.bullet_list)(i(),a().dispatch),a().focus()}p(()=>f(i()),()=>{d(e,i().schema)}),p(()=>(t(e),f(a())),()=>{d(o,!J(t(e).nodes.bullet_list)(a().state))}),q(),T();var s=$t(),c=_(s);D(c,r,"default",{}),k(s),U(n=>{s.disabled=t(o),R(s,1,n)},[()=>E(F("disabled:opacity-30 rounded-full p-2 sm:mx-1 hover:bg-gray-100"))],A),z("click",s,l),g(v,s),P()}var Bt=S("<button><!></button>");function Pt(v,r){B(r,!1);const e=m(),o=m();let a=b(r,"editorView",8),i=b(r,"editorState",8);function l(){ot(t(e).nodes.blockquote)(i(),a().dispatch),a().focus()}p(()=>f(i()),()=>{d(e,i().schema)}),p(()=>(t(e),f(a())),()=>{d(o,!ot(t(e).nodes.blockquote)(a().state))}),q(),T();var s=Bt(),c=_(s);D(c,r,"default",{}),k(s),U(n=>{s.disabled=t(o),R(s,1,n)},[()=>E(F("disabled:opacity-30 rounded-full sm:mx-1 p-2 hover:bg-gray-100"))],A),z("click",s,l),g(v,s),P()}var Tt=S("<button><!></button>");function It(v,r){B(r,!1);const e=m(),o=m();let a=b(r,"editorView",8),i=b(r,"editorState",8);function l(){J(t(e).nodes.ordered_list)(i(),a().dispatch),a().focus()}p(()=>f(i()),()=>{d(e,i().schema)}),p(()=>(t(e),f(a())),()=>{d(o,!J(t(e).nodes.ordered_list)(a().state))}),q(),T();var s=Tt(),c=_(s);D(c,r,"default",{}),k(s),U(n=>{s.disabled=t(o),R(s,1,n)},[()=>E(F("disabled:opacity-30 rounded-full p-2 sm:mx-1 hover:bg-gray-100"))],A),z("click",s,l),g(v,s),P()}var jt=S("<button><!></button>");function qt(v,r){B(r,!1);const e=m(),o=m(),a=m();let i=b(r,"editorView",8),l=b(r,"editorState",8);function s(){t(a)?G(t(e).nodes.paragraph)(l(),i().dispatch):G(t(e).nodes.heading,{level:1})(l(),i().dispatch),i().focus()}p(()=>f(l()),()=>{d(e,l().schema)}),p(()=>(t(e),f(l())),()=>{d(o,!G(t(e).nodes.heading)(l())&&!G(t(e).nodes.paragraph)(l()))}),p(()=>(t(e),f(l())),()=>{d(a,_t(t(e).nodes.heading,{level:1})(l()))}),q(),T();var c=jt(),n=_(c);D(n,r,"default",{}),k(c),U(x=>{c.disabled=t(o),R(c,1,x)},[()=>E(F(t(a)?"bg-gray-900 text-white":"hover:bg-gray-100","sm:mx-1 rounded-full p-2 disabled:opacity-30"))],A),z("click",c,s),g(v,c),P()}function Ut(v){const e=v.schema.marks.link;if(!e)return!1;const{$cursor:o,ranges:a,from:i,to:l}=v.selection,s=kt(v.doc,a,e),c=v.doc.rangeHasMark(i,l,e);return!(o||!s||c)}function At(v){const r=v.schema.nodes.image;return!(!r||!yt(v,r))}var Dt=S('<input class="w-px h-px opacity-0 fixed -top-40" type="file" accept="image/*" name="imagefile" multiple> <button><!> </button>',1);function Et(v,r){B(r,!1);const[e,o]=dt(),a=()=>ut(gt,"$currentUser",e),i=m(),l=m();let s=b(r,"editorView",8),c=b(r,"editorState",8),n=m(),x=m(void 0);async function y(){const u=t(n).files[0],$=rt()?"image/jpeg":"image/webp",V=rt()?"jpg":"webp",O=[["images",pt()].join("/"),V].join("."),N=await wt(u,1440,1440,.8,$),W=new File([N],`${u.name.split(".")[0]}.${V}`,{type:$}),{width:tt,height:w}=await bt(W),C=a()?`/assets/${O}`:URL.createObjectURL(W);d(x,0);try{a()&&await St(W,O,h=>{d(x,h)}),s().dispatch(c().tr.replaceSelectionWith(t(i).nodes.image.createAndFill({src:C,width:tt,height:w}))),s().focus(),d(x,void 0)}catch(h){console.error(h),d(x,void 0)}lt(n,t(n).value=null)}p(()=>f(c()),()=>{d(i,c().schema)}),p(()=>(f(c()),f(s())),()=>{d(l,!At(c(),null,s()))}),q(),T();var I=Dt(),M=ct(I);zt(M,u=>d(n,u),()=>t(n));var j=H(M,2),K=_(j);D(K,r,"default",{});var Q=H(K);k(j),U(u=>{j.disabled=t(l),R(j,1,u),Ct(Q,` ${(t(x)||"")??""}`)},[()=>E(F("hover:bg-gray-100 sm:mx-1 rounded-full p-2 disabled:opacity-30"))],A),z("change",M,y),z("click",j,()=>t(n).click()),g(v,I),P(),o()}var Ft=S("<button><!></button>");function Rt(v,r){B(r,!1);const e=m(),o=m();let a=b(r,"editorView",8),i=b(r,"editorState",8);function l(){let n=prompt("Enter link URL","https://example.com");n&&(it(t(e).marks.link,{href:n})(i(),a().dispatch),a().focus())}p(()=>f(i()),()=>{d(e,i().schema)}),p(()=>(f(i()),f(a())),()=>{d(o,!Ut(i(),null,a()))}),q(),T();var s=Ft(),c=_(s);D(c,r,"default",{}),k(s),U(n=>{s.disabled=t(o),R(s,1,n)},[()=>E(F("disabled:opacity-30 rounded-full p-2 sm:mx-1 hover:bg-gray-100"))],A),z("click",s,l),g(v,s),P()}var Wt=L('<svg class="h-3 w-3 sm:h-4 sm:w-4" xmlns="http://www.w3.org/2000/svg" fill="currentColor" stroke="currentColor" viewBox="0 0 384 512"><path d="M0 64C0 46.3 14.3 32 32 32H80 96 224c70.7 0 128 57.3 128 128c0 31.3-11.3 60.1-30 82.3c37.1 22.4 62 63.1 62 109.7c0 70.7-57.3 128-128 128H96 80 32c-17.7 0-32-14.3-32-32s14.3-32 32-32H48V256 96H32C14.3 96 0 81.7 0 64zM224 224c35.3 0 64-28.7 64-64s-28.7-64-64-64H112V224H224zM112 288V416H256c35.3 0 64-28.7 64-64s-28.7-64-64-64H224 112z"></path></svg>'),Kt=L('<svg class="h-3 w-3 sm:h-4 sm:w-4" fill="currentColor" stroke="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M128 64c0-17.7 14.3-32 32-32H352c17.7 0 32 14.3 32 32s-14.3 32-32 32H293.3L160 416h64c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H90.7L224 96H160c-17.7 0-32-14.3-32-32z"></path></svg>'),Ot=L('<svg class="h-3 w-3 sm:h-4 sm:w-4" fill="currentColor" stroke="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M562.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L405.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C189.5 251.2 196 330 246 380c56.5 56.5 148 56.5 204.5 0L562.8 267.7zM43.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C57 372 57 321 88.5 289.5L200.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C416.5 260.8 410 182 360 132c-56.5-56.5-148-56.5-204.5 0L43.2 244.3z"></path></svg>'),Nt=L('<svg class="h-3 w-3 sm:h-4 sm:w-4" fill="currentColor" stroke="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 64C0 46.3 14.3 32 32 32H80h48c17.7 0 32 14.3 32 32s-14.3 32-32 32H112V208H336V96H320c-17.7 0-32-14.3-32-32s14.3-32 32-32h48 48c17.7 0 32 14.3 32 32s-14.3 32-32 32H400V240 416h16c17.7 0 32 14.3 32 32s-14.3 32-32 32H368 320c-17.7 0-32-14.3-32-32s14.3-32 32-32h16V272H112V416h16c17.7 0 32 14.3 32 32s-14.3 32-32 32H80 32c-17.7 0-32-14.3-32-32s14.3-32 32-32H48V240 96H32C14.3 96 0 81.7 0 64z"></path></svg>'),Gt=L('<svg class="h-3 w-3 sm:h-4 sm:w-4" fill="currentColor" stroke="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M0 216C0 149.7 53.7 96 120 96h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V320 288 216zm256 0c0-66.3 53.7-120 120-120h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64H320c-35.3 0-64-28.7-64-64V320 288 216z"></path></svg>'),Jt=L('<svg class="h-3 w-3 sm:h-4 sm:w-4" fill="currentColor" stroke="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"></path></svg>'),Qt=L('<svg class="h-3 w-3 sm:h-4 sm:w-4" fill="currentColor" stroke="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M24 56c0-13.3 10.7-24 24-24H80c13.3 0 24 10.7 24 24V176h16c13.3 0 24 10.7 24 24s-10.7 24-24 24H40c-13.3 0-24-10.7-24-24s10.7-24 24-24H56V80H48C34.7 80 24 69.3 24 56zM86.7 341.2c-6.5-7.4-18.3-6.9-24 1.2L51.5 357.9c-7.7 10.8-22.7 13.3-33.5 5.6s-13.3-22.7-5.6-33.5l11.1-15.6c23.7-33.2 72.3-35.6 99.2-4.9c21.3 24.4 20.8 60.9-1.1 84.7L86.8 432H120c13.3 0 24 10.7 24 24s-10.7 24-24 24H32c-9.5 0-18.2-5.6-22-14.4s-2.1-18.9 4.3-25.9l72-78c5.3-5.8 5.4-14.6 .3-20.5zM224 64H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H224c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 160H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H224c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 160H480c17.7 0 32 14.3 32 32s-14.3 32-32 32H224c-17.7 0-32-14.3-32-32s14.3-32 32-32z"></path></svg>'),Xt=L('<svg class="h-3 w-3 sm:h-4 sm:w-4" fill="currentColor" stroke="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M0 96C0 60.7 28.7 32 64 32H448c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6h96 32H424c8.9 0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"></path></svg>'),Yt=S('<div class="flex"><!> <!> <!> <div class="hidden sm:block w-px bg-gray-300 mx-3"></div> <!> <!> <div class="hidden sm:block w-px bg-gray-300 mx-3"></div> <!> <!> <div class="hidden sm:block w-px bg-gray-300 mx-3"></div> <!></div>'),Zt=S('<div class="sticky top-0 z-10 sm:py-4 sm:px-4"><div class="max-w-screen-lg mx-auto px-2 backdrop-blur-sm bg-white bg-opacity-95 border-b border-t sm:border sm:rounded-full border-gray-100 shadow"><div><div class="flex items-center overflow-x-auto py-3 px-1"><!> <div class="flex-1 h-8"></div> <!> <div class="shrink-0 w-2 sm:w-4"></div> <!></div></div></div></div>');function fe(v,r){B(r,!1);let e=m(null),o=m(null);const a=ft.subscribe(u=>{d(e,u),d(o,u==null?void 0:u.state)}),i=mt();function l(){i("cancel",{})}function s(){i("save",{})}ht(a);function c(u){u.key==="s"&&u.metaKey&&(i("save",{}),u.preventDefault(),u.stopPropagation())}T();var n=Zt();z("keydown",nt,c);var x=_(n),y=_(x),I=_(y),M=_(I);{var j=u=>{var $=Yt(),V=_($);at(V,{get editorState(){return t(o)},get editorView(){return t(e)},type:"strong",children:(w,C)=>{var h=Wt();g(w,h)},$$slots:{default:!0}});var O=H(V,2);at(O,{get editorState(){return t(o)},get editorView(){return t(e)},type:"em",children:(w,C)=>{var h=Kt();g(w,h)},$$slots:{default:!0}});var X=H(O,2);Rt(X,{get editorState(){return t(o)},get editorView(){return t(e)},children:(w,C)=>{var h=Ot();g(w,h)},$$slots:{default:!0}});var Y=H(X,4);qt(Y,{get editorState(){return t(o)},get editorView(){return t(e)},children:(w,C)=>{var h=Nt();g(w,h)},$$slots:{default:!0}});var Z=H(Y,2);Pt(Z,{get editorState(){return t(o)},get editorView(){return t(e)},children:(w,C)=>{var h=Gt();g(w,h)},$$slots:{default:!0}});var N=H(Z,4);Lt(N,{get editorState(){return t(o)},get editorView(){return t(e)},children:(w,C)=>{var h=Jt();g(w,h)},$$slots:{default:!0}});var W=H(N,2);It(W,{get editorState(){return t(o)},get editorView(){return t(e)},children:(w,C)=>{var h=Qt();g(w,h)},$$slots:{default:!0}});var tt=H(W,4);Et(tt,{get editorState(){return t(o)},get editorView(){return t(e)},children:(w,C)=>{var h=Xt();g(w,h)},$$slots:{default:!0}}),k($),g(u,$)};vt(M,u=>{t(o)&&u(j)})}var K=H(M,4);Vt(K,{type:"button",$$events:{click:l},children:(u,$)=>{st();var V=et("Cancel");g(u,V)},$$slots:{default:!0}});var Q=H(K,4);Ht(Q,{type:"button",$$events:{click:s},children:(u,$)=>{st();var V=et("Save");g(u,V)},$$slots:{default:!0}}),k(I),k(y),k(x),k(n),g(v,n),P()}export{fe as default};
