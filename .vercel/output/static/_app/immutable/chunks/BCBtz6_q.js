import{t as x,a as T}from"./FYrJzXzo.js";import"./CM28Q3F9.js";import{p as C,g as o,d as h,l as g,s as l,h as b,j as I,a as M}from"./BWQv4ORO.js";import{b as P}from"./BQZnyJ-a.js";import{i as V}from"./aOCAfh_U.js";import{p as R}from"./Agn4hVUl.js";import{o as D,a as H}from"./Dnl6xlxb.js";import{P as K,f as Q,E as j,t as q,b as B}from"./BfjeiFU6.js";import{a as N,i as U,e as $,c as z,w as p,t as y,E as A,d as F,f as G,k as _,h as J,b as O}from"./Tb7dj-Cm.js";import{d as w}from"./eV_I911L.js";function W(t){return p(/^\s*>\s$/,t)}function X(t){return p(/^(\d+)\.\s$/,t,i=>({order:+i[1]}),(i,e)=>e.childCount+e.attrs.order==+i[1])}function Y(t){return p(/^\s*([-+*])\s$/,t)}function Z(t){return y(/^```$/,t)}function ee(t,i){return y(new RegExp("^(#{1,"+i+"})\\s$"),t,e=>({level:e[1].length}))}function te(t){let i=N.concat($,z),e;return(e=t.nodes.blockquote)&&i.push(W(e)),(e=t.nodes.ordered_list)&&i.push(X(e)),(e=t.nodes.bullet_list)&&i.push(Y(e)),(e=t.nodes.code_block)&&i.push(Z(e)),(e=t.nodes.heading)&&i.push(ee(e,6)),U({rules:i})}const ce=!1;var ie=x('<div id="prosemirror-editor"></div>');function me(t,i){C(i,!1);let e=R(i,"content",12,"<p>Enter text.</p>"),E=R(i,"multiLine",8,!1),d=!1,u=h(),n,r=h();function f(){return E()?F:G}function c(s,a){const k=Q(s,a);return j.create({doc:k,schema:s,plugins:[te(s),_(O(s)),_(B),J(),L]})}function S(){const s=f(),a=c(s,e());n&&!d?n.updateState(a):(l(r,a),d=!1)}function v(s){const a=this.state.apply(s);this.updateState(a),s.docChanged&&(e(q(a)),d=!0)}const L=new K({view(){return{update(s){w.set(s)}}}});D(()=>{o(u)&&o(r)&&(n=new A(o(u),{state:o(r),dispatchTransaction:v}),w.set(n))}),H(()=>{n&&n.destroy()}),g(()=>(o(r),b(e())),()=>{const s=f();o(r)||l(r,c(s,e()))}),g(()=>(b(e()),o(r)),()=>{e()!==void 0&&o(r)&&S()}),I(),V();var m=ie();P(m,s=>l(u,s),()=>o(u)),T(t,m),M()}export{me as default,ce as runes};
