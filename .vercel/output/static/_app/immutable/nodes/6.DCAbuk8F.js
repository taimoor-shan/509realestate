import{t as x,a as M}from"../chunks/FYrJzXzo.js";import"../chunks/CM28Q3F9.js";import{p as S,l as T,j as W,f as C,a as D,$ as F,s as r,g as t,b as l,d as s,h as O}from"../chunks/BWQv4ORO.js";import{h as P}from"../chunks/DGJXvoP4.js";import{i as j}from"../chunks/aOCAfh_U.js";import{p as z,s as B,b as H,a as $}from"../chunks/Agn4hVUl.js";import{e as I,f as J}from"../chunks/KVacng_F.js";import{g as h}from"../chunks/Cjz5tElU.js";import{N as k,F as q,c as _,i as G}from"../chunks/eV_I911L.js";import{E as K}from"../chunks/CmmBX89c.js";import{A as L}from"../chunks/C-tBEKg_.js";import{W as Q}from"../chunks/yJT2sZ9i.js";var R=x("<!> <!> <!> <!>",1);function ie(b,u){S(u,!1);const[y,v]=B(),w=()=>H(_,"$currentUser",y);let o=z(u,"data",8),p=s(!1),n=s("Untitled"),c=s("Copy and paste your text here."),i=s();async function U(){if(!w())return alert("Sorry, you are not authorized to create new articles.");const e=I(document.getElementById("article_content"));try{const{slug:a}=await J("POST","/api/create-article",{title:t(n),content:t(c),teaser:e});h(`/blog/${a}`)}catch(a){console.error(a),alert("A document with that title has already been published. Choose a different title.")}}async function E(){h("/blog")}T(()=>O(o()),()=>{var e;$(_,o().currentUser),$(G,!0),r(i,(e=o().globalData)==null?void 0:e.cta)}),W(),j();var m=R();P(e=>{F.title="New blog post"});var d=C(m);Q(d,{get showUserMenu(){return t(p)},set showUserMenu(e){r(p,e)},$$events:{cancel:E,save:U},$$legacy:!0});var f=l(d,2);L(f,{get title(){return t(n)},set title(e){r(n,e)},get content(){return t(c)},set content(e){r(c,e)},$$legacy:!0});var g=l(f,2);k(g,{children:(e,a)=>{K(e,{get cta(){return t(i)},set cta(N){r(i,N)},$$legacy:!0})},$$slots:{default:!0}});var A=l(g,2);q(A,{counter:"/blog/new"}),M(b,m),D(),v()}export{ie as component};
